---
layout: post
title:  "操作系统学习笔记六 文件管理"
date:   2020-08-06 23:59:59
categories: 操作系统
tags: 操作系统
mathjax: true
mermaid: false
---

* content
{:toc}
文件管理功能主要是管理外存上的文件，文件存取，共享和保护等手段提供给用户。由于时间有限，这部分打算粗略的过一遍即可。



## 文件和文件系统
### 文件、记录和数据项
* 基本数据项：最小逻辑数据单位。
* 组合数据项：若干个基本数据项组合。
* 记录：一组相关数据项的集合。
* 文件：由创建者定义的具有文件名的一组相关元素的集合，可分为有结构文件和无结构文件。

### 文件类型和文件系统模型
* 文件类型：根据用途、数据形式、存取控制属性、组织形式和处理方式分类
* 文件系统接口：对象及属性；对对象操作和管理的软件集合；文件系统接口

### 文件操作
* 基本操作：增删改查。另外有截断文件，设置文件读写位置。
* 打开和关闭：装载到内存，加入到打开文件表中。关闭反过来。
* 其他操作。

## 文件的逻辑结构
* 文件都有逻辑结构和物理结构两种形式。
* 分为有结构文件和无结构文件(流式文件)

### 顺序文件/索引文件/索引顺序文件

### 直接文件和哈希文件
* 直接文件：给定的记录键值直接获得指定记录的物理地址。
* 哈希文件：记录的键值通过hash函数获得物理地址。

## 外存分配方式
* 连续分配：易顺序访问，顺序访问快。缺点：要求连续空间，事先知道长度。
* 链接分配：隐式链接(下一物理块的地址在上一物理块中存储，且快与块不邻接)和显示连接(各物理块的指针都存放于内存中，所以将文件分配表称为File Allocation Table)。

### FAT和NTFS技术
* 一个盘划分为至多四个逻辑磁盘
* FAT和NTFS技术

### 索引分配
* 单级索引分配：每个文件分配一个索引块(表)，再将分配给该文件的所有盘块均记录再索引表中。建立一个文件只需要在为之建立的目录项中添加指向该索引块的指针。
* 多级索引分配：
* 混合索引分配：一次间接地址可达到4MB，二次间址方式文件最大长度可达到4GB，三次可达到4TB。

## 目录管理
* 要求：
  * 实现“按名存取”
  * 提高目录检索速度
  * 文件共享
  * 允许文件重名

### 文件控制块和索引结点
* 文件控制块：基本信息，存取控制信息类，使用信息类
* 索引结点：