---
layout: post
title:  "计算机网络学习笔记四 网络层"
date:   2020-07-20 06:00:00
categories: 计算机网络
tags: 计算机网络 网络层
mathjax: true
mermaid: false
---

* content
{:toc}

本篇主要包括网络层的相关介绍，网络层提供的两种服务，网际协议IP，划分子网，网际控制报文协议ICMP，互联网的路由选择协议，IPv6，IP多播，虚拟专用网VPN和网络地址转换NAT。



## 网络层提供的两种服务
* 长期争论交点：网络层是否提供可靠交互，是由网络层负责还是由端系统负责。
* 两种服务：虚电路服务，数据报服务
* 目前，网络层提供简单灵活、无连接的、尽最大努力交付的数据报服务。不提供服务质量承诺。
* 降低网络成本，运行方式灵活，能适应多种应用。

## 网际协议 IP
* 网际协议IP 是TCP/IP体系中最重要的协议之一。
* 与IP配套使用的还有三个协议：<font color = "red" size = "4">地址解析协议 ARP</font>Address Resolution Protocal，<font color="red" size="4">网际控制报文协议ICMP</font>Internet Control Message Protocol，<font color="red" size="4">网际组管理协议IGMP</font>Internet Group Management Protocol。

### IP互连网络
* 网际协议Internet Protocol，互连使用同一网际协议的计算机网络看成虚拟互连网络。使用IP协议让原本各异的网络看起来是同一的网络，所以IP协议的虚拟互连网简称IP网。

### 分类的IP地址
* 分类的IP地址如图所示
<figure align="center">
  <img src="/media/image/IPcomposition.png" width="544" height="384" />
</figure>
* IP地址中一般不使用的特殊IP地址

| 网络     | 主机号         | 源地址 | 目的地址 | 含义                   |
|:-------|:------------|:----|:-----|:---------------------|
| 0      | 0           | 可以  | 不可   | 在本网络上的本主机            |
| 0      | host-id     | 可以  | 不可   | 在本网络上的某个主机host-id    |
| 全1    | 全1          | 不可  | 可以   | 只在本网络上进行广播(各路由器均不转发) |
| net-id | 全1          | 不可  | 可以   | 对net-id上的所有主机进行广播    |
| 127    | 非全0或全1的任何数字 | 可以  | 可以   | 对本地软件环回测试只用          |

* 特点：每个IP地址都由网络号和主机号两部分组成。1.管理机构仅分配网络号，路由器根据网络号来转发分组减小资源和时间消耗。2.网络号的不同标识着不同的网络，相同网络号则在同一个局域网内。因此多归属主机则至少由两个不同的IP地址(其中网络号是不同的)，路由器也至少由两个不同的IP地址。3.通过转发器或网桥连起来的若干个局域网仍然是一个网络，由同样的网络号。4.任何网络无论大小，分配网络号的网络均是等价的。

### IP地址与硬件地址
* 硬件地址(物理地址)是数据链路层和物理层使用的地址。
* IP地址是网络层和以上各层使用的地址，是逻辑地址(IP地址是用软件实现的)。
* IP地址在IP数据报的首部，而硬件地址在MAC帧的首部。